<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Generate prediction data — create_prediction_data • visibly!</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



  <link href="../extra.css" rel="stylesheet">
  

<meta property="og:title" content="Generate prediction data — create_prediction_data" />
<meta property="og:description" content="Straightforward way to quickly create data to make model
  predictions." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">visibly!</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.8</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/intro.html">Introduction to visibly</a>
    </li>
    <li>
      <a href="../articles/intro.html##palettes-themes">Palettes &amp; Themes</a>
    </li>
    <li>
      <a href="../articles/intro.html#descriptive-visualization">Descriptive visualization</a>
    </li>
    <li>
      <a href="../articles/intro.html#plotting-model-results">Plot Models</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/m-clark">
    <span class="fa fa-github-alt"></span>
     
  </a>
</li>
<li>
  <a href="https://m-clark.github.io">
    <span class="fa fa-empire"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Generate prediction data</h1>
    <small class="dont-index">Source: <a href='https://github.com/m-clark/visibly/blob/master/R/create_prediction_data.R'><code>R/create_prediction_data.R</code></a></small>
    <div class="hidden name"><code>create_prediction_data.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Straightforward way to quickly create data to make model
  predictions.</p>
    </div>

    <pre class="usage"><span class='fu'>create_prediction_data</span>(
  <span class='no'>model_data</span>,
  <span class='kw'>conditional_data</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>num</span> <span class='kw'>=</span> <span class='no'>mean</span>,
  <span class='kw'>cat</span> <span class='kw'>=</span> <span class='st'>"most_common"</span>,
  <span class='no'>...</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>model_data</th>
      <td><p>The original data. Ideally this would come from a model
object.</p></td>
    </tr>
    <tr>
      <th>conditional_data</th>
      <td><p>A data.frame constructed from something like
<code><a href='https://rdrr.io/r/base/expand.grid.html'>base::expand.grid</a></code></p></td>
    </tr>
    <tr>
      <th>num</th>
      <td><p>A function like mean or median to be applied to numeric data.
Should return a single value. Default is mean.</p></td>
    </tr>
    <tr>
      <th>cat</th>
      <td><p>Set categorical variables to the reference level ('ref') or the
most frequently occurring category (most_common, the default).</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Additional arguments to num, e.g. <code>na.rm=T</code></p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A data frame suitable for the <code>newdata</code> argument for predict functions.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Given data that was used in a model, create data that can be used
  for predictions at key values, especially as a prelude to visualization.
  Some package functions can be found that do this, but are specific to
  certain models or don't quite provide the flexibility I want. Specifically,
  this allows for an arbitrary function to apply to numeric variables, and
  for categorical(ish) variables, one has the option for the most common
  category (ties go to the first category), or the reference level if a
  factor. For now class Date is treated as categorical.</p>
<p>In addition, one may supply their own data to set certain variables at any
  particular values via the <code>conditional_data</code> argument, for example,
  using <code>expand.grid</code> or <code><a href='https://tidyr.tidyverse.org/reference/expand.html'>tidyr::crossing</a></code>. Variables not supplied
  as columns in the <code>conditional_data</code> are treated as above.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>tidyext</span>)</div><div class='output co'>#&gt; <span class='message'></span>
#&gt; <span class='message'>Attaching package: ‘tidyext’</span></div><div class='output co'>#&gt; <span class='message'>The following object is masked from ‘package:visibly’:</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>    create_prediction_data</span></div><div class='input'><span class='fu'>create_prediction_data</span>(<span class='no'>iris</span>)</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
#&gt; 1     5.843333    3.057333        3.758    1.199333  setosa</div><div class='input'><span class='fu'>create_prediction_data</span>(<span class='no'>iris</span>, <span class='kw'>num</span> <span class='kw'>=</span> <span class='no'>median</span>,
                       <span class='fu'><a href='https://rdrr.io/r/base/expand.grid.html'>expand.grid</a></span>(
                         <span class='kw'>Sepal.Width</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>0</span>,<span class='fl'>3</span>,<span class='fl'>5</span>),
                         <span class='kw'>Species</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>'setosa'</span>, <span class='st'>'virginica'</span>)
                         )
                       )</div><div class='output co'>#&gt;   Sepal.Width   Species Sepal.Length Petal.Length Petal.Width
#&gt; 1           0    setosa          5.8         4.35         1.3
#&gt; 2           3    setosa          5.8         4.35         1.3
#&gt; 3           5    setosa          5.8         4.35         1.3
#&gt; 4           0 virginica          5.8         4.35         1.3
#&gt; 5           3 virginica          5.8         4.35         1.3
#&gt; 6           5 virginica          5.8         4.35         1.3</div><div class='input'><span class='fu'>create_prediction_data</span>(<span class='no'>iris</span>, <span class='kw'>num</span> <span class='kw'>=</span> <span class='kw'>function</span>(<span class='no'>x</span>) <span class='fu'><a href='https://rdrr.io/r/stats/quantile.html'>quantile</a></span>(<span class='no'>x</span>, <span class='kw'>p</span><span class='kw'>=</span><span class='fl'>.75</span>))</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
#&gt; 1          6.4         3.3          5.1         1.8  setosa</div><div class='input'>
<span class='no'>test_mod</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span>(<span class='no'>mpg</span>  ~ <span class='no'>wt</span> + <span class='no'>cyl</span>, <span class='no'>mtcars</span>)
<span class='no'>nd</span> <span class='kw'>=</span> <span class='fu'>create_prediction_data</span>(<span class='no'>test_mod</span>$<span class='no'>model</span>)
<span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span>(<span class='no'>test_mod</span>, <span class='kw'>newdata</span> <span class='kw'>=</span> <span class='no'>nd</span>)</div><div class='output co'>#&gt;        1 
#&gt; 20.09062 </div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://m-clark.github.io'><img src="man/figures/mc_logo.png" width=10% style='display:inline'/></a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


