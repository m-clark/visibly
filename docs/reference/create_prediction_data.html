<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Generate prediction data — create_prediction_data • visibly!</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>



  <link href="../extra.css" rel="stylesheet">
  
<meta property="og:title" content="Generate prediction data — create_prediction_data" />

<meta property="og:description" content="A port of the tidyext function." />
<meta name="twitter:card" content="summary" />


<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">visibly</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.2.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/intro.html">Introduction to visibly</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/m-clark">
    <span class="fa fa-github-alt"></span>
     
  </a>
</li>
<li>
  <a href="https://m-clark.github.io">
    <span class="fa fa-empire"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Generate prediction data</h1>
    <small class="dont-index">Source: <a href='https://github.com/m-clark/visibly/blob/master/R/create_prediction_data.R'><code>R/create_prediction_data.R</code></a></small>
    <div class="hidden name"><code>create_prediction_data.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>A port of the tidyext function.</p>
    
    </div>

    <pre class="usage"><span class='fu'>create_prediction_data</span>(<span class='no'>model_data</span>, <span class='kw'>conditional_data</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>num</span> <span class='kw'>=</span> <span class='no'>mean</span>,
  <span class='kw'>cat</span> <span class='kw'>=</span> <span class='st'>"most_common"</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>model_data</th>
      <td><p>The original data. Ideally this would come from a model
object.</p></td>
    </tr>
    <tr>
      <th>conditional_data</th>
      <td><p>A data.frame constructed from something like
<code><a href='http://www.rdocumentation.org/packages/base/topics/expand.grid'>base::expand.grid</a></code></p></td>
    </tr>
    <tr>
      <th>num</th>
      <td><p>A function like mean or median to be applied to numeric data.
Should return a single value. Default is mean.</p></td>
    </tr>
    <tr>
      <th>cat</th>
      <td><p>Set categorical variables to the reference level ('ref') or the
most frequently occurring category (most_common, the default).</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Additional arguments to num, e.g. <code>na.rm=T</code></p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A data frame suitable for the <code>newdata</code> argument for predict functions.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This is a port of the tidyext function...</p>
<p>Given data that was used in a model, create data that can be used
  for predictions at key values, especially as a prelude to visualization.
  Some package functions can be found that do this, but are specific to
  certain models or don't quite provide the flexibility I want. Specifically,
  this allows for an arbitrary function to apply to numeric variables, and
  for categorical(ish) variables, one has the option for the most common
  category (ties go to the first category), or the reference level if a
  factor. For now class Date is treated as categorical.</p>
<p>In addition, one may supply their own data to set certain variables at any
  particular values via the <code>conditional_data</code> argument, for example,
  using <code>expand.grid</code> or <code><a href='http://www.rdocumentation.org/packages/tidyr/topics/expand'>tidyr::crossing</a></code>. Variables not supplied
  as columns in the <code>conditional_data</code> are treated as above.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><a href='http://www.rdocumentation.org/packages/tidyext/topics/create_prediction_data'>create_prediction_data</a></p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'>library</span>(<span class='no'>tidyext</span>)
<span class='fu'>create_prediction_data</span>(<span class='no'>iris</span>)</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
#&gt; 1     5.843333    3.057333        3.758    1.199333  setosa</div><div class='input'><span class='fu'>create_prediction_data</span>(<span class='no'>iris</span>, <span class='kw'>num</span> <span class='kw'>=</span> <span class='no'>median</span>,
                       <span class='fu'>expand.grid</span>(
                         <span class='kw'>Sepal.Width</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='fl'>0</span>,<span class='fl'>3</span>,<span class='fl'>5</span>),
                         <span class='kw'>Species</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>'setosa'</span>, <span class='st'>'virginica'</span>)
                         )
                       )</div><div class='output co'>#&gt;   Sepal.Width   Species Sepal.Length Petal.Length Petal.Width
#&gt; 1           0    setosa          5.8         4.35         1.3
#&gt; 2           3    setosa          5.8         4.35         1.3
#&gt; 3           5    setosa          5.8         4.35         1.3
#&gt; 4           0 virginica          5.8         4.35         1.3
#&gt; 5           3 virginica          5.8         4.35         1.3
#&gt; 6           5 virginica          5.8         4.35         1.3</div><div class='input'><span class='fu'>create_prediction_data</span>(<span class='no'>iris</span>, <span class='kw'>num</span> <span class='kw'>=</span> <span class='kw'>function</span>(<span class='no'>x</span>) <span class='fu'>quantile</span>(<span class='no'>x</span>, <span class='kw'>p</span><span class='kw'>=</span><span class='fl'>.75</span>))</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
#&gt; 1          6.4         3.3          5.1         1.8  setosa</div><div class='input'>
<span class='no'>test_mod</span> <span class='kw'>=</span> <span class='fu'>lm</span>(<span class='no'>mpg</span>  ~ <span class='no'>wt</span> + <span class='no'>cyl</span>, <span class='no'>mtcars</span>)
<span class='no'>nd</span> <span class='kw'>=</span> <span class='fu'>create_prediction_data</span>(<span class='no'>test_mod</span>$<span class='no'>model</span>)
<span class='fu'>predict</span>(<span class='no'>test_mod</span>, <span class='kw'>newdata</span> <span class='kw'>=</span> <span class='no'>nd</span>)</div><div class='output co'>#&gt;        1 
#&gt; 20.09062 </div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://m-clark.github.io'>Michael Clark <img src="man/figures/lh_hex.png" height="24" /></a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

