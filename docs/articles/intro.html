<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>An Introduction to Visibly â€¢ visibly!</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="An Introduction to Visibly">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">visibly</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.2.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/intro.html">Introduction to visibly</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/m-clark">
    <span class="fa fa-github-alt"></span>
     
  </a>
</li>
<li>
  <a href="https://m-clark.github.io">
    <span class="fa fa-empire"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>An Introduction to Visibly</h1>
                        <h4 class="author">Michael Clark</h4>
            
            <h4 class="date"><span style="font-style:normal;font-family:'Open Sans'">2018-06-29</span></h4>
      
      <small class="dont-index">Source: <a href="https://github.com/m-clark/visibly/blob/master/vignettes/intro.Rmd"><code>vignettes/intro.Rmd</code></a></small>
      <div class="hidden name"><code>intro.Rmd</code></div>

    </div>

    
    
<div id="palettes-themes" class="section level2">
<h2 class="hasAnchor">
<a href="#palettes-themes" class="anchor"></a>Palettes &amp; Themes</h2>
<p>One can get started by creating a palette. This uses the <span class="pack">colortools</span> package to provide evenly spaced colors.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">library</span>(visibly)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw"><a href="../reference/create_palette.html">create_palette</a></span>(<span class="st">'papayawhip'</span>, <span class="dt">plot =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<p><img src="intro_files/figure-html/example-1.png" width="75%" style="display: block; margin: auto;"></p>
<pre><code>$papayawhip
[1] "papayawhip"

$complementary
[1] "#FFEFD5" "#D5E5FF"

$analogous
[1] "#FFEFD5" "#FAFFD5" "#FFDAD5"

$split_complentary
[1] "#FFEFD5" "#D5FAFF" "#DAD5FF"

$triadic
[1] "#FFEFD5" "#D5FFEF" "#EFD5FF"

$square
[1] "#FFEFD5" "#D5FFDA" "#D5E5FF" "#FFD5FA"

$tetradic
[1] "#FFEFD5" "#E5FFD5" "#D5E5FF" "#EFD5FF"</code></pre>
<p>Here is a palette based on the blue in the R logo.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">palettes<span class="op">$</span>Rblue</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="op">$</span>Rblue</a>
<a class="sourceLine" id="cb3-3" data-line-number="3">[<span class="dv">1</span>] <span class="st">"#1f65b7"</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="op">$</span>complementary</a>
<a class="sourceLine" id="cb3-6" data-line-number="6">[<span class="dv">1</span>] <span class="st">"#1f65b7"</span> <span class="st">"#b7701f"</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="op">$</span>monochromatic</a>
<a class="sourceLine" id="cb3-9" data-line-number="9">[<span class="dv">1</span>] <span class="st">"#1f65b7"</span> <span class="st">"#366caa"</span> <span class="st">"#4a719e"</span> <span class="st">"#5a7491"</span></a>
<a class="sourceLine" id="cb3-10" data-line-number="10"></a>
<a class="sourceLine" id="cb3-11" data-line-number="11"><span class="op">$</span>analogous</a>
<a class="sourceLine" id="cb3-12" data-line-number="12">[<span class="dv">1</span>] <span class="st">"#1f65b7"</span> <span class="st">"#241fb7"</span> <span class="st">"#1fb2b7"</span></a>
<a class="sourceLine" id="cb3-13" data-line-number="13"></a>
<a class="sourceLine" id="cb3-14" data-line-number="14"><span class="op">$</span>split_complementary</a>
<a class="sourceLine" id="cb3-15" data-line-number="15">[<span class="dv">1</span>] <span class="st">"#1f65b7"</span> <span class="st">"#b2b71f"</span> <span class="st">"#b7241f"</span></a>
<a class="sourceLine" id="cb3-16" data-line-number="16"></a>
<a class="sourceLine" id="cb3-17" data-line-number="17"><span class="op">$</span>triadic</a>
<a class="sourceLine" id="cb3-18" data-line-number="18">[<span class="dv">1</span>] <span class="st">"#1f65b7"</span> <span class="st">"#66b71f"</span> <span class="st">"#b71f66"</span></a>
<a class="sourceLine" id="cb3-19" data-line-number="19"></a>
<a class="sourceLine" id="cb3-20" data-line-number="20"><span class="op">$</span>tetradic</a>
<a class="sourceLine" id="cb3-21" data-line-number="21">[<span class="dv">1</span>] <span class="st">"#1f65b7"</span> <span class="st">"#b7701f"</span> <span class="st">"#66b71f"</span> <span class="st">"#701fb7"</span></a></code></pre></div>
<p>The palette creator can create some decent categorical distinctions without too much fuss. The following also demonstrates one of the themes, which has no grid/gray, and de-bolds the black font while leaving text clear; even the fainter version will pass web standards for contrast against a white background. As shown, you can still fiddle with the theme beyond that.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">pal =<span class="st"> </span><span class="kw"><a href="../reference/create_palette.html">create_palette</a></span>(<span class="st">'#ff5500'</span>, </a>
<a class="sourceLine" id="cb4-2" data-line-number="2">                     <span class="dt">name =</span> <span class="st">'orange_you_glad_you_have_this_color'</span>)</a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb4-4" data-line-number="4"></a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/ggplot">ggplot</a></span>(mtcars, <span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(<span class="dt">x=</span>wt, <span class="dt">y=</span>mpg)) <span class="op">+</span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/geom_point">geom_point</a></span>(<span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(<span class="dt">color=</span><span class="kw">factor</span>(cyl)), <span class="dt">size=</span><span class="dv">10</span>, <span class="dt">alpha=</span>.<span class="dv">5</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/scale_manual">scale_color_manual</a></span>(<span class="dt">values =</span> pal<span class="op">$</span>triadic) <span class="op">+</span></a>
<a class="sourceLine" id="cb4-8" data-line-number="8"><span class="st">  </span><span class="kw"><a href="../reference/theme_trueMinimal.html">theme_trueMinimal</a></span>()</a></code></pre></div>
<p><img src="intro_files/figure-html/use1-1.png" width="75%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb5-2" data-line-number="2">mtcars <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">cyl =</span> <span class="kw">factor</span>(cyl)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="st">  </span>tidyext<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/tidyext/topics/num_by">num_by</a></span>(wt, cyl) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/ggplot">ggplot</a></span>(<span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(<span class="dt">x=</span>cyl, <span class="dt">y=</span>Mean)) <span class="op">+</span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/geom_bar">geom_col</a></span>(<span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(<span class="dt">fill=</span>cyl), <span class="dt">width=</span>.<span class="dv">5</span>, <span class="dt">alpha=</span>.<span class="dv">85</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7"><span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/scale_manual">scale_fill_manual</a></span>(<span class="dt">values =</span> palettes<span class="op">$</span>Rblue<span class="op">$</span>triadic) <span class="op">+</span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8"><span class="st">  </span><span class="kw"><a href="../reference/theme_trueMinimal.html">theme_trueMinimal</a></span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb5-9" data-line-number="9"><span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/theme">theme</a></span>(<span class="dt">legend.key.size =</span> <span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/reexports">unit</a></span>(.<span class="dv">015</span>, <span class="st">'npc'</span>),</a>
<a class="sourceLine" id="cb5-10" data-line-number="10">        <span class="dt">axis.title.y =</span> <span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/element">element_text</a></span>(<span class="dt">size=</span><span class="dv">20</span>, <span class="dt">hjust=</span><span class="op">-</span>.<span class="dv">05</span>))</a></code></pre></div>
<p><img src="intro_files/figure-html/use2-1.png" width="75%" style="display: block; margin: auto;"></p>
<p>Another way to create palettes is with a function that works with <a href="http://vrl.cs.brown.edu/color">colorgorical</a>. It connects to that website to create colors based on things like whether they perceptually go together aesthetically, whether they are more or less perceptually distinct, or even if their name is unique.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">## colorgorical(n=6, pairPreference = 1, startPalette = list(c(10, -60, 45)), output = 'hex')</a>
<a class="sourceLine" id="cb6-2" data-line-number="2">[<span class="dv">1</span>] <span class="st">"#002B00"</span> <span class="st">"#95C857"</span> <span class="st">"#334D37"</span> <span class="st">"#4EF185"</span> <span class="st">"#378811"</span> <span class="st">"#7FE7D3"</span></a></code></pre></div>
<p><img src="intro_files/figure-html/colorgorical-1.png" width="75%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">## colorgorical(n=10, perceptualDifference = .5, startPalette = list(c(10, -60, 45)), output = 'hex')</a>
<a class="sourceLine" id="cb7-2" data-line-number="2"> [<span class="dv">1</span>] <span class="st">"#002B00"</span> <span class="st">"#D57381"</span> <span class="st">"#77CE3F"</span> <span class="st">"#DB0EAC"</span> <span class="st">"#2FF52B"</span> <span class="st">"#6C208E"</span> <span class="st">"#B1BF81"</span> <span class="st">"#4115F9"</span> <span class="st">"#518512"</span> <span class="st">"#B662CA"</span></a></code></pre></div>
<p><img src="intro_files/figure-html/colorgorical2-1.png" width="75%" style="display: block; margin: auto;"></p>
<p>To get a starting palette from an R or hexadecimal value, try <span class="pack">col2lab</span>.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw"><a href="../reference/col2lab.html">col2lab</a></span>(<span class="st">'dodgerblue'</span>)</a>
<a class="sourceLine" id="cb8-2" data-line-number="2">            L      a.x        b</a>
<a class="sourceLine" id="cb8-3" data-line-number="3">[<span class="dv">1</span>,] <span class="fl">59.30679</span> <span class="fl">9.612098</span> <span class="fl">-63.4918</span></a></code></pre></div>
<p>However, if you want palettes that are colorblind-safe, print-safe etc., especially for continuous scales, you should use packages like <a href="https://github.com/sjmgarnier/viridis">viridis</a> and <a href="https://github.com/thomasp85/scico">scico</a>.</p>
</div>
<div id="plotting-model-results" class="section level2">
<h2 class="hasAnchor">
<a href="#plotting-model-results" class="anchor"></a>Plotting model results</h2>
<p>I have some visualizations for plotting uncertainty intervals for fixed and random effects of mixed models. These require the <span class="pack">scico</span> package, as well as <span class="pack">lme4</span> and <span class="pack">brms</span> which are used to do the mixed models in the first place.</p>
<div id="lm-and-glm" class="section level3">
<h3 class="hasAnchor">
<a href="#lm-and-glm" class="anchor"></a>lm and glm</h3>
<p>I donâ€™t really use them aside for demonstration, but in this case the <span class="objclass">lm</span> and <span class="objclass">glm</span> objects served as a baseline.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">fit_lm =<span class="st"> </span><span class="kw">lm</span>(mpg <span class="op">~</span><span class="st"> </span>., mtcars)</a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="kw"><a href="../reference/plot_coefficients.html">plot_coefficients</a></span>(fit_lm)</a></code></pre></div>
<p><img src="intro_files/figure-html/lm0-1.png" width="75%" style="display: block; margin: auto;"></p>
<p>Change the palette, order and more.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">fit_lm =<span class="st"> </span><span class="kw">lm</span>(mpg <span class="op">~</span><span class="st"> </span>., mtcars)</a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="kw"><a href="../reference/plot_coefficients.html">plot_coefficients</a></span>(fit_lm, </a>
<a class="sourceLine" id="cb10-3" data-line-number="3">                  <span class="dt">palette=</span><span class="st">'oslo'</span>, </a>
<a class="sourceLine" id="cb10-4" data-line-number="4">                  <span class="dt">order =</span> <span class="st">'decreasing'</span>, </a>
<a class="sourceLine" id="cb10-5" data-line-number="5">                  <span class="dt">sd_multi =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb10-6" data-line-number="6">                  <span class="dt">keep_intercept =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb10-7" data-line-number="7">                  <span class="dt">ref_line =</span> <span class="kw">c</span>(<span class="op">-</span><span class="dv">1</span><span class="op">:</span><span class="dv">1</span>))</a></code></pre></div>
<p><img src="intro_files/figure-html/lm1-1.png" width="75%" style="display: block; margin: auto;"></p>
<div id="data-only" class="section level4">
<h4 class="hasAnchor">
<a href="#data-only" class="anchor"></a>Data only</h4>
<p>You may want to do your own visualization, or go beyond the default settings. Rather than providing a couple dozen arguments for you to tweak, just so you can still feel like you canâ€™t get it just quite right. Hereâ€™s the data, do with it what you will!</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="kw"><a href="../reference/plot_coefficients.html">plot_coefficients</a></span>(fit_lm, <span class="dt">plot=</span><span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb11-2" data-line-number="2">   Coefficient       value        ui_l       ui_u</a>
<a class="sourceLine" id="cb11-3" data-line-number="3"><span class="dv">1</span>           am  <span class="fl">2.52022689</span> <span class="fl">-1.59307422</span> <span class="fl">6.63352799</span></a>
<a class="sourceLine" id="cb11-4" data-line-number="4"><span class="dv">2</span>         qsec  <span class="fl">0.82104075</span> <span class="fl">-0.64064884</span> <span class="fl">2.28273034</span></a>
<a class="sourceLine" id="cb11-5" data-line-number="5"><span class="dv">3</span>         drat  <span class="fl">0.78711097</span> <span class="fl">-2.48363516</span> <span class="fl">4.05785711</span></a>
<a class="sourceLine" id="cb11-6" data-line-number="6"><span class="dv">4</span>         gear  <span class="fl">0.65541302</span> <span class="fl">-2.33110691</span> <span class="fl">3.64193294</span></a>
<a class="sourceLine" id="cb11-7" data-line-number="7"><span class="dv">5</span>           vs  <span class="fl">0.31776281</span> <span class="fl">-3.89125440</span> <span class="fl">4.52678003</span></a>
<a class="sourceLine" id="cb11-8" data-line-number="8"><span class="dv">6</span>         disp  <span class="fl">0.01333524</span> <span class="fl">-0.02237976</span> <span class="fl">0.04905024</span></a>
<a class="sourceLine" id="cb11-9" data-line-number="9"><span class="dv">7</span>           hp <span class="fl">-0.02148212</span> <span class="fl">-0.06501928</span> <span class="fl">0.02205504</span></a>
<a class="sourceLine" id="cb11-10" data-line-number="10"><span class="dv">8</span>          cyl <span class="fl">-0.11144048</span> <span class="fl">-2.20148720</span> <span class="fl">1.97860625</span></a>
<a class="sourceLine" id="cb11-11" data-line-number="11"><span class="dv">9</span>         carb <span class="fl">-0.19941925</span> <span class="fl">-1.85692425</span> <span class="fl">1.45808574</span></a>
<a class="sourceLine" id="cb11-12" data-line-number="12"><span class="dv">10</span>          wt <span class="fl">-3.71530393</span> <span class="fl">-7.50413253</span> <span class="fl">0.07352467</span></a></code></pre></div>
</div>
</div>
<div id="mixed-models" class="section level3">
<h3 class="hasAnchor">
<a href="#mixed-models" class="anchor"></a>Mixed models</h3>
<p>I do a lot of mixed models, which is my main reason for providing this functionality, so Iâ€™ve started to create some ways to plot the results of the separate fixed and random effects. Weâ€™ll use <span class="pack">lme4</span>.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="kw">library</span>(lme4)</a>
<a class="sourceLine" id="cb12-2" data-line-number="2">fit_mer =<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/lme4/topics/lmer">lmer</a></span>(Reaction <span class="op">~</span><span class="st"> </span>Days <span class="op">+</span><span class="st"> </span>(Days<span class="op">|</span>Subject), sleepstudy)</a>
<a class="sourceLine" id="cb12-3" data-line-number="3"><span class="kw"><a href="../reference/plot_coefficients.html">plot_coefficients</a></span>(fit_mer)</a></code></pre></div>
<p><img src="intro_files/figure-html/fe1-1.png" width="75%" style="display: block; margin: auto;"></p>
<p>And now the random effects. Fewer options can be found here, but this is intentional as youâ€™d want them ordered and the fixed effect style would make things messy whenever there are many random effects, which is often the case. With multiple random effects, a list of ggplot objects is returned.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="kw"><a href="../reference/plot_coefficients.html">plot_coefficients</a></span>(fit_mer, <span class="dt">ranef =</span> <span class="ot">TRUE</span>, <span class="dt">which_ranef =</span> <span class="st">'Subject'</span>)</a>
<a class="sourceLine" id="cb13-2" data-line-number="2"><span class="op">$</span><span class="st">`</span><span class="dt">(Intercept)</span><span class="st">`</span></a></code></pre></div>
<p><img src="intro_files/figure-html/re1-1.png" width="75%" style="display: block; margin: auto;"></p>
<pre><code>
$Days</code></pre>
<p><img src="intro_files/figure-html/re1-2.png" width="75%" style="display: block; margin: auto;"></p>
<p>Now for a different palette. Again, these only apply to fixed effects visualizations, due to the number of categories typically seen with random effects and how the visualization is created.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1">fit_mer2 =<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/lme4/topics/lmer">lmer</a></span>(count <span class="op">~</span><span class="st"> </span>log_Age_c <span class="op">+</span><span class="st"> </span>log_Base4_c <span class="op">*</span><span class="st"> </span>Trt <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb15-2" data-line-number="2"><span class="st">                  </span>(<span class="dv">1</span> <span class="op">|</span><span class="st"> </span>patient), </a>
<a class="sourceLine" id="cb15-3" data-line-number="3">                <span class="dt">data =</span> brms<span class="op">::</span>epilepsy)</a>
<a class="sourceLine" id="cb15-4" data-line-number="4"><span class="kw"><a href="../reference/plot_coefficients.html">plot_coefficients</a></span>(fit_mer2, </a>
<a class="sourceLine" id="cb15-5" data-line-number="5">                  <span class="dt">palette =</span> <span class="st">'berlin'</span>)</a></code></pre></div>
<p><img src="intro_files/figure-html/fe2-1.png" width="75%" style="display: block; margin: auto;"></p>
<p>You can use <span class="pack">patchwork</span> to put them into one graph.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1">plots =<span class="st"> </span><span class="kw"><a href="../reference/plot_coefficients.html">plot_coefficients</a></span>(fit_mer, <span class="dt">ranef =</span> <span class="ot">TRUE</span>, <span class="dt">which_ranef =</span> <span class="st">'Subject'</span>)</a>
<a class="sourceLine" id="cb16-2" data-line-number="2"></a>
<a class="sourceLine" id="cb16-3" data-line-number="3"><span class="kw">library</span>(patchwork)</a>
<a class="sourceLine" id="cb16-4" data-line-number="4"></a>
<a class="sourceLine" id="cb16-5" data-line-number="5">plots[[<span class="dv">1</span>]] <span class="op">+</span><span class="st"> </span>plots[[<span class="dv">2</span>]]</a></code></pre></div>
<p><img src="intro_files/figure-html/re_patchwork-1.png" width="75%" style="display: block; margin: auto;"></p>
<div id="brms" class="section level4">
<h4 class="hasAnchor">
<a href="#brms" class="anchor"></a>brms</h4>
<p>I like <span class="pack">brms</span> quite a bit and use it a lot. It served as the motivation for these coefficient plots, as did <span class="pack">bayesplot</span>, and <span class="pack">tidyposterior</span>.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="kw">library</span>(brms)</a>
<a class="sourceLine" id="cb17-2" data-line-number="2">fit_brms =<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/brms/topics/brm">brm</a></span>(count <span class="op">~</span><span class="st"> </span>log_Age_c <span class="op">+</span><span class="st"> </span>log_Base4_c <span class="op">*</span><span class="st"> </span>Trt <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb17-3" data-line-number="3"><span class="st">                 </span>(<span class="dv">1</span> <span class="op">|</span><span class="st"> </span>patient) <span class="op">+</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">|</span><span class="st"> </span>obs), </a>
<a class="sourceLine" id="cb17-4" data-line-number="4">               <span class="dt">data =</span> epilepsy,</a>
<a class="sourceLine" id="cb17-5" data-line-number="5">               <span class="dt">family =</span> poisson)</a>
<a class="sourceLine" id="cb17-6" data-line-number="6"><span class="kw"><a href="../reference/plot_coefficients.html">plot_coefficients</a></span>(fit_brms)</a></code></pre></div>
<p><img src="intro_files/figure-html/fe_brms1_vis-1.png" width="75%" style="display: block; margin: auto;"></p>
<p>And now the random effects.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1"><span class="kw"><a href="../reference/plot_coefficients.html">plot_coefficients</a></span>(fit1, <span class="dt">ranef =</span> <span class="ot">TRUE</span>, <span class="dt">which_ranef =</span> <span class="st">'patient'</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb18-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/theme">theme</a></span>(<span class="dt">axis.text.x =</span> <span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/element">element_text</a></span>(<span class="dt">angle =</span> <span class="dv">-90</span>))</a></code></pre></div>
<p><img src="intro_files/figure-html/re_brms1-1.png" width="75%" style="display: block; margin: auto;"></p>
</div>
</div>
<div id="gam" class="section level3">
<h3 class="hasAnchor">
<a href="#gam" class="anchor"></a>GAM</h3>
<p>Some very rudimentary plotting of basic GAM effects provided by the <span class="pack">mgcv</span> are provided. I really like the package, but am not crazy for the default plots, and some offered by some other packages are okay, but may not be polished enough or do the smooth plots Iâ€™d eventually like to do.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="kw">library</span>(mgcv)</a>
<a class="sourceLine" id="cb19-2" data-line-number="2">d =<span class="st"> </span><span class="kw">gamSim</span>()</a>
<a class="sourceLine" id="cb19-3" data-line-number="3">Gu <span class="op">&amp;</span><span class="st"> </span>Wahba <span class="dv">4</span> term additive model</a>
<a class="sourceLine" id="cb19-4" data-line-number="4"></a>
<a class="sourceLine" id="cb19-5" data-line-number="5">gam_model =<span class="st"> </span><span class="kw">gam</span>(y <span class="op">~</span><span class="st"> </span>x0 <span class="op">+</span><span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/brms/topics/s">s</a></span>(x1) <span class="op">+</span><span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/brms/topics/s">s</a></span>(x2, <span class="dt">bs=</span><span class="st">'gp'</span>) <span class="op">+</span><span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/brms/topics/s">s</a></span>(x3, <span class="dt">bs=</span><span class="st">'ps'</span>), <span class="dt">data=</span>d)</a>
<a class="sourceLine" id="cb19-6" data-line-number="6"></a>
<a class="sourceLine" id="cb19-7" data-line-number="7"><span class="kw"><a href="../reference/plot_gam.html">plot_gam</a></span>(gam_model,</a>
<a class="sourceLine" id="cb19-8" data-line-number="8">         <span class="dt">main_var =</span> x2)</a></code></pre></div>
<p><img src="intro_files/figure-html/gam-1.png" width="75%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1"></a>
<a class="sourceLine" id="cb20-2" data-line-number="2"><span class="kw"><a href="../reference/plot_gam.html">plot_gam</a></span>(gam_model, </a>
<a class="sourceLine" id="cb20-3" data-line-number="3">         <span class="dt">main_var =</span> <span class="kw"><a href="http://dplyr.tidyverse.org/reference/vars.html">vars</a></span>(x1, x2, x3),</a>
<a class="sourceLine" id="cb20-4" data-line-number="4">         <span class="dt">ncol =</span> <span class="dv">1</span>, </a>
<a class="sourceLine" id="cb20-5" data-line-number="5">         <span class="dt">line_color =</span> palettes<span class="op">$</span>Rblue<span class="op">$</span>Rblue, </a>
<a class="sourceLine" id="cb20-6" data-line-number="6">         <span class="dt">ribbon_color =</span> palettes<span class="op">$</span>Rblue<span class="op">$</span>complementary[<span class="dv">2</span>])</a></code></pre></div>
<p><img src="intro_files/figure-html/gam-2.png" width="75%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1"></a>
<a class="sourceLine" id="cb21-2" data-line-number="2"><span class="kw"><a href="../reference/plot_gam_check.html">plot_gam_check</a></span>(gam_model)</a></code></pre></div>
<p><img src="intro_files/figure-html/gam-3.png" width="75%" style="display: block; margin: auto;"></p>
<p>Right now, the requested effects should be for continuous 1d smooths only.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#palettes-themes">Palettes &amp; Themes</a></li>
      <li><a href="#plotting-model-results">Plotting model results</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by <a href="https://m-clark.github.io">Michael Clark <img src="man/figures/lh_hex.png" height="24"></a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
